# 📱 H5 App UI交互设计方案 - 评价准则和备选方案编辑

## 🎯 设计原则

### 统一交互方案
- **一致的交互模式**：评价准则和备选方案采用完全相同的交互方式
- **相同的视觉语言**：统一的颜色、动画、反馈设计
- **统一的操作流程**：相同的添加、编辑、删除流程

## 🔄 核心交互设计

### 1. 列表界面设计

#### 卡片式布局
- 每个项目显示为可操作的卡片
- 统一的圆角、阴影、间距设计
- 视觉区分：准则用📊图标，方案用💡图标

#### 操作手势
- **左滑删除**：向左滑动显示删除按钮（红色背景）
- **长按编辑**：长按1秒进入编辑模式
- **拖拽排序**：长按激活拖拽重新排序
- **点击添加**：底部悬浮按钮添加新项目

### 2. 具体交互细节

#### 左滑删除
- 滑动距离超过30%显示删除按钮
- 删除按钮为红色，带确认提示
- 滑动回弹效果，防止误操作

#### 长按编辑
- 长按1秒触发编辑模式
- 卡片轻微缩放 + 震动反馈
- 自动聚焦到输入框

#### 拖拽排序
- 长按激活拖拽模式
- 拖拽时显示阴影和位置指示器
- 释放后自动保存排序

#### 添加新项目
- 底部悬浮按钮（FAB）
- 点击后显示输入弹窗
- 键盘自动弹出

### 3. 编辑流程

```
列表界面 → 左滑删除/长按编辑/拖拽排序 → 编辑弹窗 → 保存/取消
```

### 4. 视觉反馈设计

#### 触觉反馈
- 操作成功时轻微震动
- 长按时触觉提示

#### 视觉反馈
- **删除状态**：红色背景 + 删除图标
- **编辑状态**：轻微缩放 + 边框高亮
- **拖拽状态**：阴影效果 + 位置指示器

#### 动画效果
- **进入动画**：从底部滑入
- **退出动画**：向下滑出
- **状态变化**：淡入淡出

### 5. 确认和撤销机制

#### 删除确认
- 滑动删除显示确认对话框
- "确认删除" + "取消"按钮
- 删除后显示撤销提示（5秒内可撤销）

#### 编辑确认
- 编辑内容自动保存草稿
- 离开时提示是否保存
- 支持多步撤销操作

### 6. 技术实现要点

#### 状态管理
- 本地状态 + 防抖保存
- 操作历史记录（支持撤销）
- 离线编辑支持

#### 性能优化
- 虚拟滚动（大量数据时）
- 懒加载编辑界面
- 动画性能优化

#### 组件设计
```typescript
// 统一的项目卡片组件
<ItemCard
  type="criterion" | "alternative"
  name={item.name}
  onEdit={() => handleEdit()}
  onDelete={() => handleDelete()}
  onDrag={() => handleDrag()}
/>

// 统一的编辑弹窗
<EditDialog
  title={type === "criterion" ? "编辑评价准则" : "编辑备选方案"}
  value={editingItem?.name}
  onSave={handleSave}
  onCancel={handleCancel}
/>
```

### 7. 优势分析

#### 用户体验优势
1. **学习成本低**：用户掌握一套操作即可
2. **操作一致**：不会在不同页面感到困惑
3. **肌肉记忆**：形成统一的交互习惯

#### 开发维护优势
1. **代码复用**：相同的组件和逻辑
2. **统一测试**：一套测试用例覆盖两个功能
3. **易于扩展**：新增其他列表时直接复用

---

## 🚀 实现计划

1. 添加编辑相关的状态管理
2. 实现统一的卡片组件
3. 实现左滑删除功能
4. 实现长按编辑功能
5. 实现拖拽排序功能
6. 实现添加新项目功能
7. 添加确认和撤销机制
8. 优化动画和交互反馈